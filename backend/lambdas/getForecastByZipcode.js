const responses = require('./api-responses')

exports.handler = async (event) => {
  // no zipcode provided
  if (!event.queryStringParameters || !event.queryStringParameters.zipcode) {
    return responses._400({ message: 'missing zipcode query string parameter' })
  }

  // get the zipcode from the query string parameters
  const zipcode = event.queryStringParameters.zipcode

  // get the forecast for the zipcode
  if (zipcodes[zipcode]) {
    return responses._200(zipcodes[zipcode])
  }

  // zipcode not found in data
  return responses._400({ message: 'zipcode not found in data' })
}

// zipcodes forecast data
const zipcodes = {
  90210: {
    data: {
      timelines: [
        {
          timestep: 'current',
          startTime: '2021-04-29T12:15:00-04:00',
          endTime: '2021-04-29T12:15:00-04:00',
          intervals: [
            {
              startTime: '2021-04-29T12:15:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 2.57,
                windGust: 2.93,
                windDirection: 161.81,
                temperature: 71.47,
                temperatureApparent: 71.47,
                cloudCover: 0,
                cloudBase: null,
                cloudCeiling: null,
                weatherCode: 1000,
              },
            },
          ],
        },
        {
          timestep: '1d',
          startTime: '2021-04-29T09:00:00-04:00',
          endTime: '2021-05-09T09:00:00-04:00',
          intervals: [
            {
              startTime: '2021-04-29T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 11.21,
                windGust: 16.67,
                windDirection: 163.83,
                temperature: 86.76,
                temperatureApparent: 83.57,
                cloudCover: 66.87,
                cloudBase: 1,
                cloudCeiling: 0,
                weatherCode: 1102,
              },
            },
            {
              startTime: '2021-04-30T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 10.45,
                windGust: 25.88,
                windDirection: 154.48,
                temperature: 92.68,
                temperatureApparent: 88.25,
                cloudCover: 98.02,
                cloudBase: 7.01,
                cloudCeiling: 7.27,
                weatherCode: 1102,
              },
            },
            {
              startTime: '2021-05-01T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 7.4,
                windGust: 21.23,
                windDirection: 140.35,
                temperature: 78.12,
                temperatureApparent: 78.12,
                cloudCover: 99.21,
                cloudBase: 5.58,
                cloudCeiling: 6.29,
                weatherCode: 1101,
              },
            },
            {
              startTime: '2021-05-02T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 9.98,
                windGust: 17.36,
                windDirection: 178.09,
                temperature: 67.06,
                temperatureApparent: 67.06,
                cloudCover: 90.26,
                cloudBase: 0.32,
                cloudCeiling: 0.37,
                weatherCode: 1101,
              },
            },
            {
              startTime: '2021-05-03T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 9.04,
                windGust: 10.02,
                windDirection: 183.59,
                temperature: 67.77,
                temperatureApparent: 67.77,
                cloudCover: 13.53,
                cloudBase: 0,
                cloudCeiling: 0,
                weatherCode: 1100,
              },
            },
            {
              startTime: '2021-05-04T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 7.85,
                windGust: 8.08,
                windDirection: 182.5,
                temperature: 70.68,
                temperatureApparent: 70.68,
                cloudCover: 14.78,
                cloudBase: 0,
                cloudCeiling: 0,
                weatherCode: 1100,
              },
            },
            {
              startTime: '2021-05-05T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 7.83,
                windGust: 8.17,
                windDirection: 186.95,
                temperature: 72.39,
                temperatureApparent: 72.39,
                cloudCover: 2.44,
                cloudBase: 0,
                cloudCeiling: 0,
                weatherCode: 1000,
              },
            },
            {
              startTime: '2021-05-06T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 9.78,
                windGust: 10.58,
                windDirection: 211.85,
                temperature: 83.59,
                temperatureApparent: 81.5,
                cloudCover: 1.51,
                cloudBase: 0,
                cloudCeiling: 0,
                weatherCode: 1000,
              },
            },
            {
              startTime: '2021-05-07T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 7.99,
                windGust: 8.48,
                windDirection: 169.03,
                temperature: 76.17,
                temperatureApparent: 75.36,
                cloudCover: 4.36,
                cloudBase: 0,
                cloudCeiling: 0,
                weatherCode: 1000,
              },
            },
            {
              startTime: '2021-05-08T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 8.75,
                windGust: 8.75,
                windDirection: 157.65,
                temperature: 67.53,
                temperatureApparent: 67.53,
                cloudCover: 12.11,
                cloudBase: 0,
                cloudCeiling: 0,
                weatherCode: 1100,
              },
            },
            {
              startTime: '2021-05-09T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 5.84,
                windGust: 6.82,
                windDirection: 139.53,
                temperature: 56.8,
                temperatureApparent: 56.8,
                cloudCover: 24.91,
                cloudBase: 0,
                cloudCeiling: 0,
                weatherCode: 1100,
              },
            },
          ],
        },
      ],
    },
  },
  94133: {
    data: {
      timelines: [
        {
          timestep: 'current',
          startTime: '2021-04-29T12:13:00-04:00',
          endTime: '2021-04-29T12:13:00-04:00',
          intervals: [
            {
              startTime: '2021-04-29T12:13:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 5.44,
                windGust: 7.18,
                windDirection: 250.19,
                temperature: 51.49,
                temperatureApparent: 51.49,
                cloudCover: 35.05,
                cloudBase: 0.16,
                cloudCeiling: null,
                weatherCode: 1100,
              },
            },
          ],
        },
        {
          timestep: '1d',
          startTime: '2021-04-29T09:00:00-04:00',
          endTime: '2021-05-09T09:00:00-04:00',
          intervals: [
            {
              startTime: '2021-04-29T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 23.24,
                windGust: 28.05,
                windDirection: 246.58,
                temperature: 52.69,
                temperatureApparent: 52.69,
                cloudCover: 100,
                cloudBase: 2.44,
                cloudCeiling: 7.34,
                weatherCode: 2100,
              },
            },
            {
              startTime: '2021-04-30T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 20.02,
                windGust: 31.83,
                windDirection: 256.41,
                temperature: 61.59,
                temperatureApparent: 61.59,
                cloudCover: 99.21,
                cloudBase: 6.75,
                cloudCeiling: 7.22,
                weatherCode: 1101,
              },
            },
            {
              startTime: '2021-05-01T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 24.11,
                windGust: 38.14,
                windDirection: 259.66,
                temperature: 61.41,
                temperatureApparent: 61.41,
                cloudCover: 26.87,
                cloudBase: 6.19,
                cloudCeiling: 0,
                weatherCode: 1100,
              },
            },
            {
              startTime: '2021-05-02T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 18.46,
                windGust: 25.12,
                windDirection: 263.95,
                temperature: 62.64,
                temperatureApparent: 62.64,
                cloudCover: 35.64,
                cloudBase: 3.37,
                cloudCeiling: 0,
                weatherCode: 1100,
              },
            },
            {
              startTime: '2021-05-03T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 14.72,
                windGust: 20.33,
                windDirection: 266.02,
                temperature: 67.62,
                temperatureApparent: 67.62,
                cloudCover: 19.01,
                cloudBase: 0,
                cloudCeiling: 0,
                weatherCode: 1100,
              },
            },
            {
              startTime: '2021-05-04T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 10.04,
                windGust: 12.17,
                windDirection: 237.28,
                temperature: 64.45,
                temperatureApparent: 64.45,
                cloudCover: 55.15,
                cloudBase: 0,
                cloudCeiling: 0,
                weatherCode: 1101,
              },
            },
            {
              startTime: '2021-05-05T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 9.24,
                windGust: 11.48,
                windDirection: 239.1,
                temperature: 70.45,
                temperatureApparent: 70.34,
                cloudCover: 42.94,
                cloudBase: 0,
                cloudCeiling: 0,
                weatherCode: 1101,
              },
            },
            {
              startTime: '2021-05-06T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 8.77,
                windGust: 11.59,
                windDirection: 243.15,
                temperature: 65.37,
                temperatureApparent: 65.37,
                cloudCover: 98.72,
                cloudBase: 0,
                cloudCeiling: 0,
                weatherCode: 1102,
              },
            },
            {
              startTime: '2021-05-07T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 9.44,
                windGust: 10.63,
                windDirection: 234.28,
                temperature: 61.5,
                temperatureApparent: 61.5,
                cloudCover: 58.45,
                cloudBase: 4.33,
                cloudCeiling: 0,
                weatherCode: 1101,
              },
            },
            {
              startTime: '2021-05-08T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 10.63,
                windGust: 13.18,
                windDirection: 252.79,
                temperature: 67.62,
                temperatureApparent: 67.57,
                cloudCover: 38.3,
                cloudBase: 0,
                cloudCeiling: 0,
                weatherCode: 1101,
              },
            },
            {
              startTime: '2021-05-09T09:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 3.31,
                windGust: 4.12,
                windDirection: 239.17,
                temperature: 54.45,
                temperatureApparent: 54.45,
                cloudCover: 17.01,
                cloudBase: 0,
                cloudCeiling: 0,
                weatherCode: 1100,
              },
            },
          ],
        },
      ],
    },
  },
  '03801': {
    data: {
      timelines: [
        {
          timestep: 'current',
          startTime: '2021-04-29T12:08:00-04:00',
          endTime: '2021-04-29T12:08:00-04:00',
          intervals: [
            {
              startTime: '2021-04-29T12:08:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 3.78,
                windGust: 4.34,
                windDirection: 83.63,
                temperature: 50.07,
                temperatureApparent: 50.07,
                cloudCover: 100,
                cloudBase: 0.19,
                cloudCeiling: 0.19,
                weatherCode: 1001,
              },
            },
          ],
        },
        {
          timestep: '1d',
          startTime: '2021-04-29T06:00:00-04:00',
          endTime: '2021-05-09T06:00:00-04:00',
          intervals: [
            {
              startTime: '2021-04-29T06:00:00-04:00',
              values: {
                precipitationIntensity: 0.4213,
                precipitationType: 1,
                windSpeed: 10.65,
                windGust: 20.36,
                windDirection: 103.39,
                temperature: 50.23,
                temperatureApparent: 50.23,
                cloudCover: 100,
                cloudBase: 0.19,
                cloudCeiling: 0.19,
                weatherCode: 4201,
              },
            },
            {
              startTime: '2021-04-30T06:00:00-04:00',
              values: {
                precipitationIntensity: 0.0646,
                precipitationType: 1,
                windSpeed: 18.84,
                windGust: 33.91,
                windDirection: 285.61,
                temperature: 60.24,
                temperatureApparent: 60.24,
                cloudCover: 100,
                cloudBase: 2.15,
                cloudCeiling: 2.08,
                weatherCode: 4200,
              },
            },
            {
              startTime: '2021-05-01T06:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 16.78,
                windGust: 31.12,
                windDirection: 279.44,
                temperature: 55.56,
                temperatureApparent: 55.56,
                cloudCover: 95.82,
                cloudBase: 5.95,
                cloudCeiling: 6.03,
                weatherCode: 1101,
              },
            },
            {
              startTime: '2021-05-02T06:00:00-04:00',
              values: {
                precipitationIntensity: 0.0039,
                precipitationType: 1,
                windSpeed: 14.09,
                windGust: 23.58,
                windDirection: 267.65,
                temperature: 64.38,
                temperatureApparent: 64.38,
                cloudCover: 100,
                cloudBase: 4.2,
                cloudCeiling: 5.13,
                weatherCode: 4000,
              },
            },
            {
              startTime: '2021-05-03T06:00:00-04:00',
              values: {
                precipitationIntensity: 0.0437,
                precipitationType: 1,
                windSpeed: 12.33,
                windGust: 17.78,
                windDirection: 84.39,
                temperature: 45.77,
                temperatureApparent: 45.77,
                cloudCover: 100,
                cloudBase: 1.35,
                cloudCeiling: 3.04,
                weatherCode: 4200,
              },
            },
            {
              startTime: '2021-05-04T06:00:00-04:00',
              values: {
                precipitationIntensity: 0.0122,
                precipitationType: 1,
                windSpeed: 11.14,
                windGust: 15.79,
                windDirection: 38.8,
                temperature: 44.85,
                temperatureApparent: 44.85,
                cloudCover: 100,
                cloudBase: 0.12,
                cloudCeiling: 1.76,
                weatherCode: 4000,
              },
            },
            {
              startTime: '2021-05-05T06:00:00-04:00',
              values: {
                precipitationIntensity: 0.002,
                precipitationType: 1,
                windSpeed: 6.24,
                windGust: 9.87,
                windDirection: 94.44,
                temperature: 49.93,
                temperatureApparent: 49.93,
                cloudCover: 100,
                cloudBase: 0.38,
                cloudCeiling: 1.52,
                weatherCode: 4000,
              },
            },
            {
              startTime: '2021-05-06T06:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 10.33,
                windGust: 14.79,
                windDirection: 135.75,
                temperature: 49.66,
                temperatureApparent: 49.66,
                cloudCover: 100,
                cloudBase: 2.98,
                cloudCeiling: 1.52,
                weatherCode: 1102,
              },
            },
            {
              startTime: '2021-05-07T06:00:00-04:00',
              values: {
                precipitationIntensity: 0.1445,
                precipitationType: 1,
                windSpeed: 29.95,
                windGust: 50.04,
                windDirection: 112.14,
                temperature: 47.17,
                temperatureApparent: 47.17,
                cloudCover: 100,
                cloudBase: 2.36,
                cloudCeiling: 1.41,
                weatherCode: 4200,
              },
            },
            {
              startTime: '2021-05-08T06:00:00-04:00',
              values: {
                precipitationIntensity: 0.1921,
                precipitationType: 1,
                windSpeed: 26.11,
                windGust: 42.95,
                windDirection: 202.02,
                temperature: 54.14,
                temperatureApparent: 54.14,
                cloudCover: 100,
                cloudBase: 0.64,
                cloudCeiling: 1.79,
                weatherCode: 4200,
              },
            },
            {
              startTime: '2021-05-09T06:00:00-04:00',
              values: {
                precipitationIntensity: 0,
                precipitationType: 1,
                windSpeed: 20.2,
                windGust: 29.08,
                windDirection: 293.21,
                temperature: 49.62,
                temperatureApparent: 49.62,
                cloudCover: 80.23,
                cloudBase: 0.5,
                cloudCeiling: 0,
                weatherCode: 1102,
              },
            },
          ],
        },
      ],
    },
  },
}
